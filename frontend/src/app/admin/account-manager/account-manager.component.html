    <div class="main-panel">
      
        <!-- th√¥ng tin qu·∫£n l√Ω -->
        <div class="profile-container">
          <h3 class="title">üë§ Th√¥ng tin c·ªßa qu·∫£n l√Ω kho</h3>

          <div class="profile-card shadow-lg">
            <div class="profile-left">
              <img [src]="userInfo?.image_url || 'assets/img/default-avatar.png'" alt="avatar" class="avatar-img">
              <button class="btn btn-update mt-3" (click)="toggleUserInfoForm()">
                ‚úèÔ∏è {{  showUserInfoForm  ? 'ƒê√≥ng' : 'C·∫≠p nh·∫≠t th√¥ng tin' }}
              </button>
            </div>

            <div class="profile-right">
              <p><strong>H·ªç t√™n:</strong> {{ userInfo?.full_name || 'Ch∆∞a c√≥' }}</p>
              <p><strong>Ng√†y sinh:</strong>  {{ userInfo?.date_of_birth ? (userInfo.date_of_birth | date:'dd/MM/yyyy') : 'Ch∆∞a c√≥' }}</p>
              <p><strong>Gi·ªõi t√≠nh:</strong> {{ userInfo?.gender || 'Ch∆∞a c√≥' }}</p>
              <p><strong>ƒê·ªãa ch·ªâ:</strong> {{ userInfo?.address || 'Ch∆∞a c√≥' }}</p>
              <p><strong>SƒêT:</strong> {{ userInfo?.phone || 'Ch∆∞a c√≥' }}</p>
            </div>
          </div>

          <!-- hi·ªán form c·∫≠p nh·∫≠t -->
          <form *ngIf=" showUserInfoForm " class="form-card shadow-sm mt-4" (ngSubmit)="submitInfo()" #form="ngForm">
            <h5>üì• Nh·∫≠p ho·∫∑c c·∫≠p nh·∫≠t th√¥ng tin</h5>
            <div class="form-group">
              <label>H·ªç t√™n</label>
              <input [(ngModel)]="formData.full_name" name="full_name" class="form-control" placeholder="Nguy·ªÖn VƒÉn A">
            </div>
            <div class="form-group">
              <label>Ng√†y sinh</label>
              <!-- NgƒÉn kh√¥ng cho ng√†y sinh ch·ªçn sau h√¥m nay -->
              <input type="date" [(ngModel)]="formData.date_of_birth" name="dob" class="form-control" [max]="today">
            </div>
            <div class="form-group">
              <label>Gi·ªõi t√≠nh</label>
              <select [(ngModel)]="formData.gender" name="gender" class="form-control">
                <option value="">-- Ch·ªçn gi·ªõi t√≠nh --</option>
                <option value="Nam">Nam</option>
                <option value="N·ªØ">N·ªØ</option>
              </select>
            </div>
            <div class="form-group">
              <label>ƒê·ªãa ch·ªâ</label>
              <input [(ngModel)]="formData.address" name="address" class="form-control" placeholder="123 ƒê∆∞·ªùng ABC, Qu·∫≠n X">
            </div>
            <div class="form-group">
              <label>S·ªë ƒëi·ªán tho·∫°i</label>
              <input [(ngModel)]="formData.phone" name="phone" class="form-control" placeholder="0987654321">
            </div>
            <div class="form-group">
              <label>·∫¢nh ƒë·∫°i di·ªán</label>
              <input type="file" (change)="onFileSelected($event)" class="form-control">
            </div>
            <button class="btn btn-primary w-100 mt-3" type="submit"> L∆∞u th√¥ng tin</button>
          </form>
        </div>

        <!-- DANH S√ÅCH NH√ÇN VI√äN -->
        <div class="container mt-4">

          <!-- Ti√™u ƒë·ªÅ danh s√°ch -->
          <h2 class="mt-3 mb-2">üìã Danh s√°ch t√†i kho·∫£n</h2>
          
          <br>

          <!-- ‚úÖ Sticky Thanh t√¨m ki·∫øm + l·ªçc -->
          <div class="sticky-nav">
            <nav class="navbar navbar-header navbar-expand-lg border-bottom">
              <div class="search-filter-container d-flex flex-wrap gap-2 align-items-center">

                <!-- üîç T√¨m ki·∫øm theo t√™n -->
                <div class="input-group search-input">
                  <input type="text" class="form-control" placeholder="T√¨m theo t√™n..."
                        [(ngModel)]="searchKeyword" (input)="filterUsers()" />
                </div>

                <!-- üìÇ B·ªô l·ªçc vai tr√≤ -->
                <select class="form-select role-select" [(ngModel)]="selectedRole" (change)="filterUsers()">
                  <option value="">-- T·∫•t c·∫£ vai tr√≤ --</option>
                  <option value="user">Nh√¢n vi√™n</option>
                  <option value="admin">Qu·∫£n tr·ªã</option>
                </select>

                <!-- üìå B·ªô l·ªçc tr·∫°ng th√°i -->
                <select class="form-select role-select" [(ngModel)]="selectedStatus" (change)="filterUsers()">
                  <option value="">-- T·∫•t c·∫£ tr·∫°ng th√°i --</option>
                  <option value="active">Ho·∫°t ƒë·ªông</option>
                  <option value="inactive">Ng∆∞ng</option>
                </select>

                <!-- N√∫t Th√™m -->
                <button class="btn btn-primary ms-auto" (click)="showAccountForm = true">
                  Th√™m t√†i kho·∫£n
                </button>
              </div>
            </nav>
          </div>

          <br>

          <!-- B·∫£ng t√†i kho·∫£n -->
          <table class="table table-bordered table-hover mt-2">
            <thead class="table-dark text-center">
              <tr>
                <th>ID</th>
                <th>H·ªç t√™n</th>
                <th>Email</th>
                <th>Vai tr√≤</th>
                <th>Tr·∫°ng th√°i</th>
                <th>H√†nh ƒë·ªông</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let user of filteredUsers; let i = index" class="align-middle text-center">
                <td>{{ i + 1 }}</td>
                <td>{{ user.name }}</td>
                <td>{{ user.email }}</td>
                <td>
                  {{ user.role === 'user' ? 'Nh√¢n vi√™n' : (user.role === 'admin' ? 'Qu·∫£n l√Ω kho' : 'Kh√¥ng x√°c ƒë·ªãnh') }}
                </td>
                <td>
                 <select  
                    class="status-select"
                    [ngClass]="user.status === 'active' ? 'status-active' : 'status-inactive'"
                    [(ngModel)]="user.status"
                    (change)="updateStatus(user)">
                    <option value="active">Ho·∫°t ƒë·ªông</option>
                    <option value="inactive">Ng∆∞ng</option>
                  </select>
                </td>
                <td>
                  <button class="btn-view" (click)="xemThongTin(user)">Xem th√¥ng tin</button>
                  <!--<button class="btn btn-sm btn-outline-danger" (click)="xoaTaiKhoan(user.id)"> Xo√°</button>-->
                </td>
              </tr>
            </tbody>
          </table>
        </div>


        <!-- hi·ªán form xem th√¥ng tin -->
         <!-- ‚úÖ Popup hi·ªÉn th·ªã khi xem -->
          <!-- ‚úÖ Popup hi·ªÉn th·ªã khi xem -->
          <div class="modal-backdrop" *ngIf="selectedUser">
            <div class="modal-content p-4 profile-modal">

              <div class="text-end mb-3">
                <button class="btn btn-sm btn-danger" (click)="selectedUser = null">ƒê√≥ng</button>
              </div>

              <div class="profile-container">
                <h3 class="title">üë§ Th√¥ng tin t√†i kho·∫£n</h3>

                <div class="profile-card shadow-lg">
                  <div class="profile-left">
                    <img [src]="selectedUser?.image_url || 'assets/img/default-avatar.png'" alt="avatar" class="avatar-img" />
                  </div>

                  <div class="profile-right">
                    <p><strong>H·ªç t√™n:</strong> {{ selectedUser?.full_name || 'Ch∆∞a c√≥' }}</p>
                    <p><strong>Ng√†y sinh:</strong> {{ selectedUser?.date_of_birth || 'Ch∆∞a c√≥' }}</p>
                    <p><strong>Gi·ªõi t√≠nh:</strong> {{ selectedUser?.gender || 'Ch∆∞a c√≥' }}</p>
                    <p><strong>ƒê·ªãa ch·ªâ:</strong> {{ selectedUser?.address || 'Ch∆∞a c√≥' }}</p>
                    <p><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> {{ selectedUser?.phone || 'Ch∆∞a c√≥' }}</p>
                  </div>
                </div>
              </div>

            </div>
          </div>


          <!-- Form Th√™m T√†i Kho·∫£n -->
          <div *ngIf="showAccountForm" class="modal-backdrop">
            <div class="modal-content">
              <h3>Th√™m t√†i kho·∫£n</h3>

              <label>H·ªç v√† t√™n:</label>
              <input type="text" [(ngModel)]="newUser.name" placeholder="Nh·∫≠p t√™n t√†i kho·∫£n" />

              <label>Email:</label>
              <input type="email" [(ngModel)]="newUser.email" placeholder="Nh·∫≠p email" />

              <label>M·∫≠t kh·∫©u:</label>
              <input type="password" [(ngModel)]="newUser.password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" />

              <label>Vai tr√≤:</label>
              <select [(ngModel)]="newUser.role">
                <option value="user">Nh√¢n vi√™n</option>
                <option value="admin">Qu·∫£n tr·ªã</option>
              </select>

              <div class="form-buttons">
                <button class="btn btn-success" (click)="themTaiKhoan()">L∆∞u</button>
                <button class="btn btn-secondary" (click)="showAccountForm = false">H·ªßy</button>
              </div>
            </div>
          </div>
          


        
    </div>
