<div class="main-panel">

    <h1>Duy·ªát phi·∫øu nh·∫≠p kho </h1>

    <!-- B·ªô l·ªçc phi·∫øu -->
    <div class="filter-bar-phieu">
    <input type="text" placeholder="üîé T√¨m m√£ phi·∫øu ho·∫∑c nh√† cung c·∫•p" [(ngModel)]="filter.keyword" (input)="locPhieu()" />

    <label>üìÖ T·ª´ ng√†y:
        <input type="date" [(ngModel)]="filter.ngayBatDau" (change)="locPhieu()" />
    </label>

    <label>üìÖ ƒê·∫øn ng√†y:
        <input type="date" [(ngModel)]="filter.ngayKetThuc" (change)="locPhieu()" />
    </label>

    <label>Tr·∫°ng th√°i:
        <select [(ngModel)]="filter.trangThai" (change)="locPhieu()">
        <option value="">T·∫•t c·∫£</option>
        <option value="ƒê√£ g·ª≠i phi·∫øu">ƒê√£ g·ª≠i phi·∫øu</option>
        <option value="ƒê√£ duy·ªát">ƒê√£ duy·ªát</option>
        <option value="ƒê√£ nh·∫≠p h√†ng v√†o kho">ƒê√£ nh·∫≠p h√†ng v√†o kho</option>
        </select>
    </label>
    </div>

    <table class="invoice-table">
        <thead>
        <tr>
            <th>M√£ phi·∫øu</th>
            <th>Nh√† cung c·∫•p</th>
            <th>Ng√†y t·∫°o</th>
            <th>Tr·∫°ng th√°i</th>
            <th>Thao t√°c</th>
        </tr>
        </thead>
        <ng-container *ngFor="let p of danhSachPhieu">
            <!-- D√≤ng phi·∫øu -->
            <tr>
            <td>{{ p.receipt_code }}</td>
            <td>{{ p.supplier_name }}</td>
            <td>{{ p.created_date | date:'dd/MM/yyyy' }}</td>
            <td>
            <span [ngClass]="{
                'status-duyet': p.trang_thai === 'ƒê√£ duy·ªát',
                'status-dahoanthanh': p.trang_thai === 'ƒê√£ nh·∫≠p h√†ng v√†o kho',
                'status-huy': p.trang_thai === 'ƒê√£ h·ªßy'
            }">
                {{ p.trang_thai }}
            </span>
            </td>
            <td>
           <button *ngIf="p.trang_thai === 'ƒê√£ g·ª≠i phi·∫øu' && p.trang_thai !== 'ƒê√£ h·ªßy'" 
                    (click)="xemChiTiet(p)" 
                    class="btn-space btn-gray">
            Ki·ªÉm tra duy·ªát phi·∫øu
            </button>

            <button *ngIf="p.trang_thai === 'ƒê√£ g·ª≠i phi·∫øu' || p.trang_thai === 'ƒê√£ h·ªßy'"
                    (click)="huyPhieu(p)" 
                    [disabled]="p.trang_thai === 'ƒê√£ h·ªßy'"
                    [ngClass]="{'disabled-button': p.trang_thai === 'ƒê√£ h·ªßy', 'btn-red': true, 'btn-space': true}">
                H·ªßy phi·∫øu
            </button>

            <button *ngIf="p.trang_thai === 'ƒê√£ duy·ªát'" (click)="xemChiTiet(p)" class="btn-bluewater">
                X√°c nh·∫≠n h√†ng v√†o kho
            </button>

            <button *ngIf="p.trang_thai === 'ƒê√£ nh·∫≠p h√†ng v√†o kho'" class="disabled-button-green" disabled>
                Ho√†n th√†nh
            </button>
            </td>
            </tr>

            <!-- D√≤ng chi ti·∫øt n·∫±m ngay b√™n d∆∞·ªõi -->
            <tr *ngIf="selectedPhieu?.id === p.id">
            <td colspan="5">
                <!-- N·ªôi dung chi ti·∫øt phi·∫øu ·ªü ƒë√¢y -->
                <!-- Chi ti·∫øt phi·∫øu -->
                <div class="detail-container">
                    <button class="btn-close-top" (click)="dongChiTiet()">‚úñ</button>
                    <h2>üìã Chi ti·∫øt phi·∫øu: {{ selectedPhieu.receipt_code }}</h2>

                    <!-- Th√¥ng tin chung -->
                    <div class="detail-info-wrapper">
                    <!-- H√†ng ƒë·∫ßu ti√™n: Th√¥ng tin th·ªùi gian -->
                    <div class="info-row full-width">
                        <div class="info-section">
                        <h3>Th√¥ng tin th·ªùi gian</h3>
                        <p><strong>Ng√†y t·∫°o:</strong> {{ selectedPhieu.created_date | date:'MM/dd/yyyy' }}</p>
                        <p><strong>Ng√†y h·∫πn nh·∫≠p h√†ng:</strong> {{ selectedPhieu.meeting_date | date:'MM/dd/yyyy' }}</p>
                        </div>
                    </div>

                    <!-- H√†ng th·ª© hai: 2 c·ªôt ngang h√†ng -->
                    <div class="info-row two-columns">
                        <!-- Nh√† cung c·∫•p -->
                        <div class="info-section">
                        <h3>Nh√† cung c·∫•p</h3>
                        <p class="supplier-logo"><strong>Logo nh√† cung c·∫•p:</strong> <img [src]="selectedPhieu.logo_url" alt="Logo nh√† cung c·∫•p" /></p>
                        <p><strong>T√™n nh√† cung c·∫•p:</strong> {{ selectedPhieu.supplier_name }}</p>
                        <p><strong>ƒê·ªãa ch·ªâ nh√† cung c·∫•p:</strong> {{ selectedPhieu.supplier_address }}</p>
                        <p><strong>H·ªç t√™n ng∆∞·ªùi ƒë·∫°i di·ªán:</strong> {{ selectedPhieu.representative_name }}</p>
                        <p><strong>Email:</strong> {{ selectedPhieu.representative_email }}</p>
                        <p><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> {{ selectedPhieu.representative_phone }}</p>
                        </div>

                        <!-- Ghi ch√∫ -->
                        <div class="info-section">
                        <h3>Ghi ch√∫ & Ph·∫£n h·ªìi</h3>
                        <p>
                        <strong>Nh√¢n vi√™n t·∫°o phi·∫øu n√†y:</strong><br>
                        {{ selectedPhieu.staff_account_name || 'Ch∆∞a c√≥' }} ‚Äî <em>email:</em> {{ selectedPhieu.staff_account_email || 'Ch∆∞a c√≥' }}
                        </p>
                        <p><strong>Ghi ch√∫ t·ª´ nh√¢n vi√™n:</strong> {{ selectedPhieu.note || 'Kh√¥ng c√≥' }}</p>

                        <br>

                        <!-- Qu·∫£n l√Ω ƒëang duy·ªát hi·ªán t·∫°i -->
                        <p>
                        <strong>üë®‚Äçüíº Qu·∫£n l√Ω duy·ªát:</strong><br>
                         {{ adminName }} ‚Äî <em>email:</em> {{ adminEmail }}
                        </p>
                        <p><strong>Ph·∫£n h·ªìi c·ªßa qu·∫£n l√Ω kho: </strong> {{ selectedPhieu.note_admin || 'Ch∆∞a c√≥' }}</p>
                        </div>
                    </div>
                    </div>


                    <!-- Danh s√°ch s·∫£n ph·∫©m -->
                    <h4> Danh s√°ch s·∫£n ph·∫©m</h4>

                    <div class="product-table-wrapper">
                    <div class="scroll-x">
                    <table class="detail-table">
                        <thead>
                        <tr>
                            <th>STT</th>
                            <th>H√¨nh ·∫£nh</th>
                            <th>M√£ s·∫£n ph·∫©m</th>
                            <th>T√™n s·∫£n ph·∫©m</th>
                            <th>Lo·∫°i</th>
                            <th>ƒê∆°n v·ªã</th>
                            <th>Tr·ªçng l∆∞·ª£ng l√¥ h√†ng (KG)</th>
                            <th>Di·ªán t√≠ch l√¥ h√†ng (m2)</th>
                            <th>Ng√†y s·∫£n xu·∫•t</th>
                            <th>H·∫°n s·ª≠ d·ª•ng</th>
                            <th>S·ªë l∆∞·ª£ng</th>
                            <th>ƒê∆°n gi√°</th>
                            <th>Th√†nh ti·ªÅn</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let sp of selectedPhieu.products; let i = index">
                            <td>{{ i + 1 }}</td>
                            <td><img [src]="sp.image_url" height="40" /></td>
                            <td>{{ sp.product_code }}</td>
                            <td>{{ sp.product_name }}</td>
                            <td>{{ sp.product_type }}</td>
                            
                            <td>{{ sp.unit }}</td>
                            <td>{{ sp.weight }} kg</td>
                            <td>{{ sp.area }} m¬≤</td>

                            <td>{{ sp.manufacture_date | date:'dd/MM/yyyy' }}</td>
                            <td>{{ sp.expiry_date | date:'dd/MM/yyyy' }}</td>
                            <td>{{ sp.quantity }}</td>
                            <td>{{ sp.unit_price | number:'1.0-0' }}</td>
                            <td>{{ sp.total_price | number:'1.0-0' }}</td>
                        </tr>
                        </tbody>
                    </table>
                    </div>
                    </div>

                    <!-- T·ªïng ti·ªÅn -->
                    <div class="total-amount">
                    <strong> T·ªïng c·ªông:</strong>
                    {{ selectedPhieu.total_amount | number:'1.0-0' }} VNƒê 
                    </div>

                    <br>

                    <p><strong> G·ª≠i ph·∫£n h·ªìi cho nh√¢n vi√™n:</strong></p>
                    <textarea [(ngModel)]="phanHoiHeThong" placeholder="Nh·∫≠p ph·∫£n h·ªìi cho nh√¢n vi√™n..."></textarea>


                  <!-- N√∫t th·ª±c hi·ªán -->
                <div class="button-group" style="display: flex; justify-content: flex-end; gap: 10px;">
                <button (click)="hoanTatKiemTra()">
                    {{ selectedPhieu?.trang_thai === 'ƒê√£ duy·ªát' ? 'C·∫≠p nh·∫≠t ph·∫£n h·ªìi' : '‚úÖ Duy·ªát phi·∫øu nh·∫≠p' }}
                </button>

                <button 
                    [disabled]="selectedPhieu.trang_thai !== 'ƒê√£ duy·ªát'" 
                    [class.disabled-button]="selectedPhieu.trang_thai !== 'ƒê√£ duy·ªát'" 
                    (click)="moPopupNhapKho()">
                    ‚úÖ X√°c nh·∫≠n nh·∫≠p h√†ng v√†o kho
                </button> 
                </div>

                    

<!----------------- üì¶ POPUP X√°c nh·∫≠n nh·∫≠p kho -->
                    <div class="modal" *ngIf="popupNhapKhoMo">
                    <div class="modal-content wide-modal">

                        <!-- Th√¥ng tin phi·∫øu -->
                        <h3>üì¶ X√°c nh·∫≠n nh·∫≠p kho cho phi·∫øu: {{ selectedPhieu.receipt_code }}</h3>

                        <!-- B·ªô l·ªçc m√£ s·∫£n ph·∫©m -->
                        <!-- üîç B·ªô l·ªçc ki·ªÉm tra s·∫£n ph·∫©m tr√πng m√£ -->
                        <div class="product-check-section">
                        <div class="check-row">
                            <input
                            [(ngModel)]="maCanKiemTra"
                            placeholder="Nh·∫≠p m√£ s·∫£n ph·∫©m..."
                            class="filter-input input-field"
                            />
                            <button (click)="kiemTraTrongKho()">Ki·ªÉm tra</button>
                        </div>

                        <div class="check-result">
                            <ng-container *ngIf="danhSachMaTrung === null">
                            <em style="color: gray;">üí° Danh s√°ch m√£ ho·∫∑c s·∫£n ph·∫©m b·ªã tr√πng s·∫Ω hi·ªÉn th·ªã t·∫°i ƒë√¢y sau khi ki·ªÉm tra.</em>
                            </ng-container>

                            <ng-container *ngIf="danhSachMaTrung !== null && danhSachMaTrung.length === 0">
                            <span style="color: green;">‚úÖ Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o tr√πng m√£!</span>
                            </ng-container>

                            <ng-container *ngIf="danhSachMaTrung !== null && danhSachMaTrung.length > 0">
                            <span style="color: crimson;">‚ùå M√£ s·∫£n ph·∫©m ƒë√£ t·ªìn t·∫°i: <strong>{{ danhSachMaTrung.join(', ') }}</strong></span>
                            </ng-container>
                        </div>
                        </div>


                        <!-- K·∫øt qu·∫£ -->
                        <div *ngIf="ketQuaSanPham !== null" style="margin-top: 20px;">
                        <table class="detail-table" *ngIf="ketQuaSanPham?.product_code">
                            <thead>
                            <tr>
                                <th>H√¨nh ·∫£nh</th>
                                <th>M√£ SP</th>
                                <th>T√™n s·∫£n ph·∫©m</th>
                                <th>Lo·∫°i</th>
                                <th>ƒê∆°n gi√°</th>
                                <th>ƒê∆°n v·ªã</th>
                                <th>Kh·ªëi l∆∞·ª£ng (KG)</th>
                                <th>Di·ªán t√≠ch (m¬≤)</th>
                                <th>Ng√†y s·∫£n xu·∫•t</th>
                                <th>H·∫°n s·ª≠ d·ª•ng</th>
                                <th>S·ªë l∆∞·ª£ng</th>
                                <th>Th√†nh ti·ªÅn</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>
                                <img [src]="ketQuaSanPham.image_url" height="40" *ngIf="ketQuaSanPham.image_url" />
                                </td>
                                <td class="td-barcode">
                                <img [src]="'https://barcode.tec-it.com/barcode.ashx?data=' + ketQuaSanPham.product_code + '&code=Code128'" height="40" width="75px" />
                                </td>
                                <td>{{ ketQuaSanPham.product_name }}</td>
                                <td>{{ ketQuaSanPham.product_type }}</td>
                                <td>{{ ketQuaSanPham.unit_price | number:'1.0-0' }}</td>
                                <td>{{ ketQuaSanPham.unit }}</td>
                                <td>{{ ketQuaSanPham.total_weight | number:'1.1-1' }}</td>
                                <td>{{ ketQuaSanPham.total_area | number:'1.2-2' }}</td>
                                <td>{{ ketQuaSanPham.manufacture_date | date:'dd/MM/yyyy' }}</td>
                                <td>{{ ketQuaSanPham.expiry_date | date:'dd/MM/yyyy' }}</td>
                                <td>{{ ketQuaSanPham.quantity }}</td>
                                <td>{{ ketQuaSanPham.total_price | number:'1.0-0' }}</td>
                            </tr>
                            </tbody>
                        </table>

                        <!-- N·∫øu kh√¥ng c√≥ -->
                        <div *ngIf="!ketQuaSanPham.product_code" style="color: green; font-weight: bold;">
                            ‚úÖ S·∫£n ph·∫©m v·ªõi m√£ "{{ maCanKiemTra }}" ch∆∞a ƒë∆∞·ª£c nh·∫≠p v√†o kho!
                        </div>
                        </div>


                        <!-- Logo v√† t√™n nh√† cung c·∫•p -->
                        <div style="display: flex; align-items: center; gap: 20px; margin-top: 10px;" class="supplier-logo">
                        <div>
                            <p><strong>T√™n nh√† cung c·∫•p:</strong> {{ selectedPhieu.supplier_name }} <img [src]="selectedPhieu.logo_url" alt="Logo nh√† cung c·∫•p" /></p>
                        </div>
                        </div>

                        <br>

                        <div class="scroll-x">
                        <!-- B·∫£ng s·∫£n ph·∫©m -->
                        <table class="detail-table">
                        <thead>
                            <tr>
                            <th>STT</th>
                            <th>H√¨nh ·∫£nh</th>
                            <th>M√£ SP</th>
                            <th>T√™n s·∫£n ph·∫©m</th>
                            <th>Lo·∫°i</th>
                            <th>ƒê∆°n gi√°</th>
                            <th>ƒê∆°n v·ªã</th>
                            <th>Kh·ªëi l∆∞·ª£ng (KG)</th>
                            <th>Di·ªán t√≠ch (m¬≤)</th>
                            <th>Ng√†y SX</th>
                            <th>H·∫°n SD</th>
                            <th>S·ªë l∆∞·ª£ng</th>
                            <th>Th√†nh ti·ªÅn</th>
                            <th>Khu l∆∞u kho</th>
                            <th>V·ªã tr√≠ trong kho</th>
                            <th>Ch·ªçn v·ªã tr√≠</th>
                            <th>C·∫≠p nh·∫≠t th√™m</th>
                            </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let sp of danhSachSanPhamNhap | filterProductCode:filterCode; let i = index">
                            <td>{{ i + 1 }}</td>
                            <td>
                            <div class="image-upload-cell" style="display: flex; flex-direction: column; align-items: center; gap: 6px; max-width: 120px;">
                                <img [src]="sp.image_url" height="40" *ngIf="sp.image_url" style="max-width: 100%; object-fit: contain;" />
                                <input type="file" (change)="onFileSelected($event, sp)" style="max-width: 100%;" />
                            </div>
                            </td>

                            <!-- C√°c √¥ ƒë∆∞·ª£c ch·ªânh s·ª≠a -->
                            <td>
                            <img [src]="'https://barcode.tec-it.com/barcode.ashx?data=' + sp.product_code + '&code=Code128&translate-esc=false'" height="40" *ngIf="sp.product_code" />
                            <br />
                            <input [(ngModel)]="sp.product_code" (change)="kiemTraTrungMa(sp)" class="input-field"/></td>
                            <td><input [(ngModel)]="sp.product_name" class="input-field" /></td>
                            <td><input [(ngModel)]="sp.product_type" (blur)="kiemTraTrungMa(sp)" class="input-field"/></td>
                            <td>
                            <input type="number" [(ngModel)]="sp.unit_price" (ngModelChange)="capNhatThanhTien(sp)" style="width: 120px;" />
                            </td>

                            <!-- C√°c √¥ kh√¥ng cho ch·ªânh s·ª≠a -->
                            <td>{{ sp.unit }}</td>
                            <td>{{ sp.weight }}</td>
                            <td>{{ sp.area }}</td>
                            <td>{{ sp.manufacture_date | date:'dd/MM/yyyy' }}</td>
                            <td>{{ sp.expiry_date | date:'dd/MM/yyyy' }}</td>
                            <td>{{ sp.quantity }}</td>
                            <td>{{ sp.total_price | number:'1.0-0' }}</td>
                            <!-- Ph√¢n khu -->
                            <td>
                            <select [(ngModel)]="sp.khu_vuc_id" style="width: 160px;">
                                <option *ngFor="let kv of danhSachKhuVuc" [value]="kv.id">{{ kv.ten_khu_vuc }}</option>
                            </select>
                            </td>
                            <td>
                            <input [(ngModel)]="sp.location" class="input-field" readonly />
                            </td>
                            <!-- N√∫t ch·ªçn v·ªã tr√≠ -->
                            <td>
                            <button (click)="moPopupChonViTri(sp)">üìç Ch·ªçn v·ªã tr√≠</button>
                            </td>
                            <td>
                            <label class="switch">
                                <input type="checkbox" [(ngModel)]="sp.cap_nhat_them" />
                                <span class="slider round"></span>
                            </label>
                            </td>
                        </tr>
                        </tbody>
                        </table>
                        </div>
                        
                        <!-- T·ªïng ti·ªÅn -->
                        <div class="total-amount" style="margin-top: 15px;">
                        <strong>T·ªïng c·ªông:</strong> {{ selectedPhieu.total_amount | number:'1.0-0' }} VNƒê
                        </div>

                        <!-- N√∫t h√†nh ƒë·ªông -->
                        <!-- N√∫t h√†nh ƒë·ªông --> 
                        <div class="button-group">
                        <button 
                            (click)="xacNhanNhapKhoChinhThuc()"
                            [disabled]="selectedPhieu?.trang_thai === 'Ho√†n t·∫•t nh·∫≠p h√†ng'"
                            [ngStyle]="{ opacity: selectedPhieu?.trang_thai === 'Ho√†n t·∫•t nh·∫≠p h√†ng' ? '0.6' : '1' }"
                        >
                            Nh·∫≠p kho
                        </button>
                        <button (click)="dongPopup()" style="background-color: red;">ƒê√≥ng</button>
                        </div>
                    </div>
                    </div>

                    <!-- üì¶ POPUP Ch·ªçn v·ªã tr√≠ ƒë·ªÉ h√†ng -->
                    <!-- üì¶ POPUP Ch·ªçn v·ªã tr√≠ ƒë·ªÉ h√†ng -->
                    <div class="modal" *ngIf="popupChonViTriMo">
                    <div class="modal-content wide-modal">
                        <h3>üìç Ch·ªçn v·ªã tr√≠ ƒë·ªÉ h√†ng cho: <strong>{{ sanPhamDangChon?.product_name }}</strong></h3>

                        <label>Ch·ªçn khu v·ª±c:</label>
                        <select [(ngModel)]="sanPhamDangChon.khu_vuc_id" (change)="layPalletTheoKhu(sanPhamDangChon.khu_vuc_id)">
                        <option *ngFor="let kv of danhSachKhuVuc" [value]="kv.id">{{ kv.ten_khu_vuc }}</option>
                        </select>

                        <br>

                        <!-- ‚úÖ Hi·ªÉn th·ªã s·ªë ƒë√£ ph√¢n b·ªï -->
                        <div style="margin-bottom: 12px;">
                        <h4><strong>ƒê√£ ph√¢n b·ªï:</strong></h4>
                        - S·ªë l∆∞·ª£ng: {{ getSoLuongDaThem() }} / {{ sanPhamDangChon.quantity }} th√πng<br>
                        - Kh·ªëi l∆∞·ª£ng: {{ getKhoiLuongDaThem().toFixed(2) }} / {{ sanPhamDangChon.weight }} kg

                        <!-- ‚úÖ Nh√≥m n√∫t ƒëi·ªÅu khi·ªÉn -->
                        <div class="map-action-buttons">
                            <button (click)="tuDongThemHetVaoPallet()" class="btn-blue">
                            T·ª± ƒë·ªông th√™m h·∫øt v√†o pallet
                            </button>
                            &nbsp;
                            <button (click)="thuHoiTatCaPallet()" class="btn-red">
                            Thu h·ªìi to√†n b·ªô
                            </button>
                        </div>
                        </div>


                        

                        <!-- S∆° ƒë·ªì 10x10 -->
                        <div class="pallet-grid-map">
                            <div *ngFor="let row of palletGridPopup" class="pallet-row">
                                <div *ngFor="let pallet of row"
                                    class="pallet-box"
                                    [title]="'KL: ' + pallet.weightUsed + 'kg | DT: ' + pallet.areaUsed.toFixed(1) + 'm¬≤'"
                                    [ngClass]="{
                                        'pallet-empty': pallet.weightUsed === 0 && !laPalletDangChon(pallet),
                                        'pallet-used': pallet.weightUsed > 0 && pallet.weightUsed < 500 && !laPalletDangChon(pallet),
                                        'pallet-full': pallet.weightUsed >= 500,
                                        'pallet-selected': laPalletDangChon(pallet)
                                    }"
                                    (click)="chonPallet(pallet)">
                                    <div class="pallet-content">
                                        <span *ngIf="pallet.weightUsed === 0">Ôºã</span>
                                        <span *ngIf="pallet.weightUsed > 0">{{ pallet.weightUsed }} kg</span>
                                    </div>
                                    <div class="pallet-label">{{ pallet.name }}</div>
                                </div>
                            </div>
                        </div>

                        <br>
                        <div class="button-group">
                        <button (click)="xacNhanViTriHang()">X√°c nh·∫≠n v·ªã tr√≠</button>
                        <button (click)="popupChonViTriMo = false" style="background-color: red;">ƒê√≥ng</button>
                        </div>
                    </div>
                    </div>

                    <!-- ‚úÖ MINI POPUP NH·∫¨P S·ªê L∆Ø·ª¢NG --> 
                    <div class="mini-popup" *ngIf="chonSoLuongPopupMo">
                    <div class="mini-popup-content">
                        <h4>Nh·∫≠p s·ªë l∆∞·ª£ng cho pallet: {{ palletDangNhapSoLuong.name }}</h4>

                        <!-- üëâ D√≤ng khuy·∫øn ngh·ªã -->
                        <div *ngIf="goiYSoLuongToiDa > 0" style="margin-bottom: 8px; font-size: 13px; color: #888;">
                        Khuy·∫øn ngh·ªã: C√≥ th·ªÉ th√™m t·ªëi ƒëa <strong>{{ goiYSoLuongToiDa }}</strong> s·∫£n ph·∫©m (theo kh·ªëi l∆∞·ª£ng c√≤n tr·ªëng).
                        </div>

                        <input type="number" [(ngModel)]="soLuongMuonThem" min="1" placeholder="Nh·∫≠p s·ªë l∆∞·ª£ng" />
                        
                        <div class="mini-popup-actions">
                        <button (click)="xacNhanThemSoLuongVaoPallet()">X√°c nh·∫≠n</button>
                        <button (click)="chonSoLuongPopupMo = false" style="background-color: red;">Hu·ª∑</button>
                        </div>
                    </div>
                    </div>


                </div>
            </td>
            </tr>
        </ng-container>
    </table>

    

</div>
